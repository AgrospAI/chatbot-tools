{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "local-chatbot",
  "title": "Local Chatbot",
  "description": "A button bottom-right chatbot component that can be integrated into web applications.",
  "dependencies": [
    "dexie",
    "dexie-react-hooks"
  ],
  "registryDependencies": [
    "https://agrospai.github.io/chatbot-tools/r/chatbot.json"
  ],
  "files": [
    {
      "path": "src/registry/new-york/chatbot/components/local-chatbot.tsx",
      "content": "import { useEffect, useState } from \"react\"\n\nimport type { ChatbotProps, Message } from \"@/registry/new-york/chatbot/components/chatbot\"\nimport Chatbot from \"@/registry/new-york/chatbot/components/chatbot\"\nimport { db, settings } from \"@/registry/new-york/chatbot/lib/db\"\nimport { useLiveQuery } from \"dexie-react-hooks\"\n\ntype Props = Omit<ChatbotProps, \"messages\" | \"setMessages\" | \"newChat\">\n\nexport default function LocalChatbot({\n  endpoint = \"http://localhost:8000/ask\",\n  strings,\n  icon,\n}: Props) {\n  const [currentChatId, setCurrentChatId] = useState<string | null>(null)\n\n  useEffect(() => {\n    ;(async () => {\n      let storedChatId = await settings.get(\"currentChatId\")\n\n      if (!storedChatId) {\n        storedChatId = crypto.randomUUID()\n        await db.chats.add({ id: storedChatId, messages: [] })\n        await settings.set(\"currentChatId\", storedChatId)\n      }\n\n      setCurrentChatId(storedChatId)\n      console.log(\"Current Chat ID:\", storedChatId)\n    })()\n  }, [])\n\n  const messages =\n    useLiveQuery(async () => {\n      if (!currentChatId) return []\n      const chat = await db.chats.get(currentChatId)\n      return chat?.messages ?? []\n    }, [currentChatId]) ?? []\n\n  const setMessages: React.Dispatch<\n    React.SetStateAction<Message[]>\n  > = value => {\n    if (!currentChatId) return\n    ;(async () => {\n      const chat = await db.chats.get(currentChatId)\n      const prev = chat?.messages ?? []\n\n      const next = typeof value === \"function\" ? value(prev) : value\n\n      await db.chats.update(currentChatId, { messages: next })\n    })()\n  }\n\n  const newChat = async () => {\n    await db.chats.clear()\n\n    const newChatId = crypto.randomUUID()\n    await db.chats.add({ id: newChatId, messages: [] })\n    await settings.set(\"currentChatId\", newChatId)\n    setCurrentChatId(newChatId)\n  }\n  return (\n    <Chatbot\n      endpoint={endpoint}\n      strings={strings}\n      icon={icon}\n      messages={messages}\n      setMessages={setMessages}\n      newChat={newChat}\n    />\n  )\n}\n",
      "type": "registry:component",
      "target": "~/components/chat/bot/"
    },
    {
      "path": "src/registry/new-york/chatbot/components/FastragIcon.tsx",
      "content": "import type { SVGProps } from \"react\";\n\nconst SvgFastragIcon = (props: SVGProps<SVGSVGElement>) => <svg xmlns=\"http://www.w3.org/2000/svg\" xmlSpace=\"preserve\" width=\"1em\" height=\"1em\" viewBox=\"0 0 64 64\" {...props}><g style={{\n    fill: \"currentColor\",\n  }}><path d=\"M94.64 90.713a2.97 2.97 0 0 1 2.975 2.975v3.103a2.97 2.97 0 0 1-2.975 2.975 2.97 2.97 0 0 1-2.975-2.975v-3.103a2.97 2.97 0 0 1 2.975-2.975m19.556 0a2.97 2.97 0 0 0-2.975 2.975v3.103a2.97 2.97 0 0 0 2.975 2.975 2.97 2.97 0 0 0 2.974-2.975v-3.103a2.97 2.97 0 0 0-2.974-2.975\" style={{\n      fill: \"currentColor\",\n    }} transform=\"translate(-33.726 -27.948)scale(.62945)\" /><path d=\"m110.88 65.06-16.545 6.29c-8.999.17-16.908 6.067-17.884 14.25l-.08-.001c-2.999 0-5.413 2.495-5.413 5.595v8.063c0 3.1 2.414 5.596 5.412 5.596l.08-.001c.99 8.303 9.12 14.254 18.284 14.254h3.163v6.286l16.54-6.289c9.026-.144 16.969-6.05 17.947-14.251h.081c2.999 0 5.413-2.495 5.413-5.595v-8.063c0-3.1-2.414-5.595-5.413-5.595h-.081c-.99-8.302-9.12-14.253-18.282-14.253h-3.222zM94.733 78.94h19.368c6.381 0 10.79 4.072 10.79 8.369v15.834c0 4.296-4.409 8.369-10.79 8.369H94.734c-6.382 0-10.79-4.073-10.79-8.37V87.31c0-4.297 4.408-8.37 10.79-8.37z\" style={{\n      fill: \"currentColor\",\n    }} transform=\"translate(-33.726 -27.94)scale(.62945)\" /></g></svg>;\n\nexport default SvgFastragIcon;",
      "type": "registry:component",
      "target": "~/components/chat/bot/"
    }
  ],
  "type": "registry:component"
}